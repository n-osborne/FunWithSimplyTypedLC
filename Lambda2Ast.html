<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Lambda2Ast</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Lambda2Ast.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lambda Typer</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2018 Nicolas Osborne</td></tr><tr><th>License</th><td>BSD 3-clauses</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Lambda2Ast</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Type declaration</a></li><li><a href="#g:2">Main programs</a></li><li><a href="#g:3">Build the Abstract Syntax Tree</a></li><li><a href="#g:4">Type manipulations</a></li><li><a href="#g:5">Prepare the program into a list of tokens</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Provide the function pg2ast which turn a program written in Simply Typed Lambda
Calculus into an Abstract Syntax Tree.</p><p>A program in Simply Typed Lambda Calculus is divided into two main parts:</p><ul><li><p>An <code>Assignations</code> part containing assignations instruction of the form:</p><pre>let id Exp
</pre><p>Where <code>id</code> is an identificator and <code>Exp</code> is a simply styped lambda
expression.</p></li><li>A <code>Program</code> part containing the actual computation which may contain <code>id</code>
  previously defined in the <code>Assignations</code> part.</li></ul></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:AST">AST</a><ul class="subs"><li>= <a href="#v:Leave">Leave</a> { <ul class="subs"><li><a href="#v:name">name</a> :: String</li><li><a href="#v:ltype">ltype</a> :: String</li><li><a href="#v:size">size</a> :: Int</li></ul> }</li><li>| <a href="#v:Unary">Unary</a> { <ul class="subs"><li><a href="#v:name">name</a> :: String</li><li><a href="#v:ltype">ltype</a> :: String</li><li><a href="#v:size">size</a> :: Int</li><li><a href="#v:below">below</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></li></ul> }</li><li>| <a href="#v:Binary">Binary</a> { <ul class="subs"><li><a href="#v:name">name</a> :: String</li><li><a href="#v:ltype">ltype</a> :: String</li><li><a href="#v:size">size</a> :: Int</li><li><a href="#v:left">left</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></li><li><a href="#v:right">right</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></li></ul> }</li></ul></li><li class="src short"><a href="#v:file2ast">file2ast</a> :: [Char] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a></li><li class="src short"><a href="#v:exp2ast">exp2ast</a> :: [Char] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a></li><li class="src short"><a href="#v:createAST">createAST</a> :: [[Char]] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a></li><li class="src short"><a href="#v:computeBinaryType">computeBinaryType</a> :: [Char] -&gt; [Char] -&gt; [Char] -&gt; [Char]</li><li class="src short"><a href="#v:computeAbstractionType">computeAbstractionType</a> :: [Char] -&gt; [Char] -&gt; [Char]</li><li class="src short"><a href="#v:computeApplicationType">computeApplicationType</a> :: [Char] -&gt; [Char] -&gt; [Char]</li><li class="src short"><a href="#v:computePairType">computePairType</a> :: [Char] -&gt; [Char] -&gt; [Char]</li><li class="src short"><a href="#v:parenthesizeType">parenthesizeType</a> :: [Char] -&gt; [Char]</li><li class="src short"><a href="#v:isFunction">isFunction</a> :: [Char] -&gt; Bool</li><li class="src short"><a href="#v:computePairElim">computePairElim</a> :: [Char] -&gt; [Char] -&gt; [Char]</li><li class="src short"><a href="#v:splitType">splitType</a> :: [Char] -&gt; [[Char]]</li><li class="src short"><a href="#v:file2pg">file2pg</a> :: [Char] -&gt; [[Char]]</li><li class="src short"><a href="#v:file2list">file2list</a> :: [Char] -&gt; [[Char]]</li><li class="src short"><a href="#v:extractAssignations">extractAssignations</a> :: [[Char]] -&gt; [[Char]]</li><li class="src short"><a href="#v:extractPg">extractPg</a> :: [[Char]] -&gt; [[Char]]</li><li class="src short"><a href="#v:parseA">parseA</a> :: [[Char]] -&gt; [[[Char]]]</li><li class="src short"><a href="#v:preparePg">preparePg</a> :: [[[Char]]] -&gt; [[Char]] -&gt; [[Char]]</li></ul></div><div id="interface"><h1 id="g:1">Type declaration</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AST" class="def">AST</a> <a href="src/Lambda2Ast.html#AST" class="link">Source</a> <a href="#t:AST" class="selflink">#</a></p><div class="doc"><p>Abstract Syntax Tree type declaration.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Leave" class="def">Leave</a></td><td class="doc"><p>Correspond to the constant of the language. </p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:name" class="def">name</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ltype" class="def">ltype</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:size" class="def">size</a> :: Int</dfn><div class="doc"><p>size of the <code><a href="Lambda2Ast.html#t:AST">AST</a></code></p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Unary" class="def">Unary</a></td><td class="doc"><p>Correspond to the unary operators of the language.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:name" class="def">name</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ltype" class="def">ltype</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:size" class="def">size</a> :: Int</dfn><div class="doc"><p>size of the <code><a href="Lambda2Ast.html#t:AST">AST</a></code></p></div></li><li><dfn class="src"><a id="v:below" class="def">below</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></dfn><div class="doc"><p>argument of the operator</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:Binary" class="def">Binary</a></td><td class="doc"><p>Correspond to the binary operators of the language.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:name" class="def">name</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ltype" class="def">ltype</a> :: String</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:size" class="def">size</a> :: Int</dfn><div class="doc"><p>size of the <code><a href="Lambda2Ast.html#t:AST">AST</a></code></p></div></li><li><dfn class="src"><a id="v:left" class="def">left</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></dfn><div class="doc"><p>first argument of the binary operator</p></div></li><li><dfn class="src"><a id="v:right" class="def">right</a> :: <a href="Lambda2Ast.html#t:AST">AST</a></dfn><div class="doc"><p>second argument of the binary operator</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:AST" class="caption collapser" onclick="toggleSection('i:AST')">Instances</p><div id="section.i:AST" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:AST:Show:1" class="instance expander" onclick="toggleSection('i:id:AST:Show:1')"></span> Show <a href="Lambda2Ast.html#t:AST">AST</a></span> <a href="src/Lambda2Ast.html#line-59" class="link">Source</a> <a href="#t:AST" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:AST:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Lambda2Ast.html#t:AST">AST</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Lambda2Ast.html#t:AST">AST</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Lambda2Ast.html#t:AST">AST</a>] -&gt; ShowS</p></div></div></td></tr></table></div></div></div><h1 id="g:2">Main programs</h1><div class="top"><p class="src"><a id="v:file2ast" class="def">file2ast</a> :: [Char] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a> <a href="src/Lambda2Ast.html#file2ast" class="link">Source</a> <a href="#v:file2ast" class="selflink">#</a></p><div class="doc"><p>Turn a source file into the corresponding <code><a href="Lambda2Ast.html#t:AST">AST</a></code>.</p><p>A source file must contain two main parts deliminated by the three following
key words in that order: <code>Assignations</code>, <code>Program</code>, <code>End</code>. The assignation part
(between the two first key words) is a series of assignation instruction (with
the <code>let</code> key word) and the program part (between the two lasts key words) is
the actual computation of which the source file is a description. The program
part may contain the identificators declared in the assignation part.</p><dl><dt><code>input</code></dt><dd>The content of the source file.</dd><dt><code>output</code></dt><dd>the corresponding <code><a href="Lambda2Ast.html#t:AST">AST</a></code> type checked.</dd></dl></div></div><div class="top"><p class="src"><a id="v:exp2ast" class="def">exp2ast</a> :: [Char] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a> <a href="src/Lambda2Ast.html#exp2ast" class="link">Source</a> <a href="#v:exp2ast" class="selflink">#</a></p><div class="doc"><p>Return the corresponding <code><a href="Lambda2Ast.html#t:AST">AST</a></code> of the given expression.</p><dl><dt><code>input</code></dt><dd>A well formed expression without any identificator, a &quot;all in one&quot;
 lambda expression.</dd><dt><code>output</code></dt><dd>The corresponding <code><a href="Lambda2Ast.html#t:AST">AST</a></code> type checked.</dd></dl></div></div><h1 id="g:3">Build the Abstract Syntax Tree</h1><div class="top"><p class="src"><a id="v:createAST" class="def">createAST</a> :: [[Char]] -&gt; <a href="Lambda2Ast.html#t:AST">AST</a> <a href="src/Lambda2Ast.html#createAST" class="link">Source</a> <a href="#v:createAST" class="selflink">#</a></p><div class="doc"><p>Create the <code><a href="Lambda2Ast.html#t:AST">AST</a></code> corresponding to the given list of tokens.</p><p>This function defines the syntax of the language.</p><dl><dt><code>input</code></dt><dd>the list of tokens representing the program.</dd><dt><code>output</code></dt><dd>the corresponding <code><a href="Lambda2Ast.html#t:AST">AST</a></code> type checked.</dd></dl></div></div><h1 id="g:4">Type manipulations</h1><div class="top"><p class="src"><a id="v:computeBinaryType" class="def">computeBinaryType</a> :: [Char] -&gt; [Char] -&gt; [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#computeBinaryType" class="link">Source</a> <a href="#v:computeBinaryType" class="selflink">#</a></p><div class="doc"><p>Given two types and a binary operator, compute the expression's type.</p><dl><dt><code>input</code></dt><dd>operator name</dd><dt><code>input</code></dt><dd>type of the first argument</dd><dt><code>input</code></dt><dd>type of the second argument</dd><dt><code>output</code></dt><dd>type of the expression</dd></dl></div></div><div class="top"><p class="src"><a id="v:computeAbstractionType" class="def">computeAbstractionType</a> :: [Char] -&gt; [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#computeAbstractionType" class="link">Source</a> <a href="#v:computeAbstractionType" class="selflink">#</a></p><div class="doc"><p>Given the binder's type and the body's type, compute the type of the
 abstraction.</p><dl><dt><code>input</code></dt><dd>type of the binder.</dd><dt><code>input</code></dt><dd>type of the body.</dd><dt><code>output</code></dt><dd>type of the expression.</dd></dl></div></div><div class="top"><p class="src"><a id="v:computeApplicationType" class="def">computeApplicationType</a> :: [Char] -&gt; [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#computeApplicationType" class="link">Source</a> <a href="#v:computeApplicationType" class="selflink">#</a></p><div class="doc"><p>Given the type of a function and the type of an argument, compute the type
 of the application.</p><dl><dt><code>input</code></dt><dd>the type of the function.</dd><dt><code>input</code></dt><dd>the type of the argument.</dd><dt><code>output</code></dt><dd>the type of the expression.</dd></dl></div></div><div class="top"><p class="src"><a id="v:computePairType" class="def">computePairType</a> :: [Char] -&gt; [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#computePairType" class="link">Source</a> <a href="#v:computePairType" class="selflink">#</a></p><div class="doc"><p>Given the type of two expression, compute the type of the pair.</p><dl><dt><code>input</code></dt><dd>the type of the first element of the pair.</dd><dt><code>input</code></dt><dd>the type of the second element of the pair.</dd><dt><code>output</code></dt><dd>the type of the expression.</dd></dl></div></div><div class="top"><p class="src"><a id="v:parenthesizeType" class="def">parenthesizeType</a> :: [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#parenthesizeType" class="link">Source</a> <a href="#v:parenthesizeType" class="selflink">#</a></p><div class="doc"><p>Prepare a type to be combined with another type. Put a pair parenthesis
 around the type if it is a complex type.</p><dl><dt><code>input</code></dt><dd>the type</dd><dt><code>output</code></dt><dd>the same type</dd></dl></div></div><div class="top"><p class="src"><a id="v:isFunction" class="def">isFunction</a> :: [Char] -&gt; Bool <a href="src/Lambda2Ast.html#isFunction" class="link">Source</a> <a href="#v:isFunction" class="selflink">#</a></p><div class="doc"><p>Predicate. Determine whether a type is the type of a function.</p><dl><dt><code>input</code></dt><dd>a type expression.</dd><dt><code>output</code></dt><dd>true if the type is the type of a function, false otherwise.</dd></dl></div></div><div class="top"><p class="src"><a id="v:computePairElim" class="def">computePairElim</a> :: [Char] -&gt; [Char] -&gt; [Char] <a href="src/Lambda2Ast.html#computePairElim" class="link">Source</a> <a href="#v:computePairElim" class="selflink">#</a></p><div class="doc"><p>Compute type of a pair elimination</p><dl><dt><code>input</code></dt><dd>operator, either <code>first</code> or <code>second</code></dd><dt><code>input</code></dt><dd>type of the pair, <em>ie</em> of the from <code>AxB</code></dd><dt><code>output</code></dt><dd>type of the expression</dd></dl></div></div><div class="top"><p class="src"><a id="v:splitType" class="def">splitType</a> :: [Char] -&gt; [[Char]] <a href="src/Lambda2Ast.html#splitType" class="link">Source</a> <a href="#v:splitType" class="selflink">#</a></p><div class="doc"><p>Split a composed type in its two main parts.</p><dl><dt><code>input</code></dt><dd>a composed type</dd><dt><code>output</code></dt><dd>the list of the two types composing the composed type</dd></dl></div></div><h1 id="g:5">Prepare the program into a list of tokens</h1><div class="top"><p class="src"><a id="v:file2pg" class="def">file2pg</a> :: [Char] -&gt; [[Char]] <a href="src/Lambda2Ast.html#file2pg" class="link">Source</a> <a href="#v:file2pg" class="selflink">#</a></p><div class="doc"><p>Prepare the content of a file for <code><a href="Lambda2Ast.html#v:createAST">createAST</a></code> function.</p><dl><dt><code>input</code></dt><dd>The content of a file as described in the specifications.</dd><dt><code>output</code></dt><dd>A list of tokens ready for building an AST.</dd></dl></div></div><div class="top"><p class="src"><a id="v:file2list" class="def">file2list</a> :: [Char] -&gt; [[Char]] <a href="src/Lambda2Ast.html#file2list" class="link">Source</a> <a href="#v:file2list" class="selflink">#</a></p><div class="doc"><p>Turn a String into the corresponding list of tokens.</p><p>Split the string and drop the separators.
 Separators are whitespace and end of line.</p></div></div><div class="top"><p class="src"><a id="v:extractAssignations" class="def">extractAssignations</a> :: [[Char]] -&gt; [[Char]] <a href="src/Lambda2Ast.html#extractAssignations" class="link">Source</a> <a href="#v:extractAssignations" class="selflink">#</a></p><div class="doc"><p>Return the sub-list corresponding to the list of tokens corresponding to
 the Assignation part of the source file.</p></div></div><div class="top"><p class="src"><a id="v:extractPg" class="def">extractPg</a> :: [[Char]] -&gt; [[Char]] <a href="src/Lambda2Ast.html#extractPg" class="link">Source</a> <a href="#v:extractPg" class="selflink">#</a></p><div class="doc"><p>Return the sub-list corresponding to the list of tokens corresponding to
 the Program part of the source file</p></div></div><div class="top"><p class="src"><a id="v:parseA" class="def">parseA</a> :: [[Char]] -&gt; [[[Char]]] <a href="src/Lambda2Ast.html#parseA" class="link">Source</a> <a href="#v:parseA" class="selflink">#</a></p><div class="doc"><p>Parse the Assignation part of the source file.</p><dl><dt><code>Input</code></dt><dd>The list of tokens corresponding to the Assignation part of the
 source file.</dd><dt><code>Output</code></dt><dd>A list of assignations. The <code>head</code> of each item is an <code>id</code> and
 the <code>tail</code> is the <code>expression</code></dd></dl></div></div><div class="top"><p class="src"><a id="v:preparePg" class="def">preparePg</a> :: [[[Char]]] -&gt; [[Char]] -&gt; [[Char]] <a href="src/Lambda2Ast.html#preparePg" class="link">Source</a> <a href="#v:preparePg" class="selflink">#</a></p><div class="doc"><p>Substitute the Id in the list of tokens corresponding to the program part
 of the source file by the corresponding list of tokens.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>